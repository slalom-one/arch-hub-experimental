{"components":{"schemas":{"error":{"properties":{"error":{"description":"エラーメッセージ","type":"string"},"reason":{"description":"エラーの原因","type":"string"},"url":{"description":"エラーが発生したURL","type":"string"}},"required":["error"],"type":"object"}}},"info":{"description":"PLATEAUに関する様々なデータの取得が行えるAPIです。試験運用中であり、APIの仕様は予告なく変更される可能性があります（SLAも保証していません）。","title":"PLATEAU API（試験提供中）","version":"1.0"},"openapi":"3.0.0","paths":{"/citygml/attributes":{"get":{"parameters":[{"description":"CityGMLファイルのURL","in":"query","name":"url","required":true,"schema":{"type":"string"}},{"description":"カンマ区切りのgml:id","in":"query","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"additionalProperties":true,"description":"地物の属性情報","properties":{"_bbox":{"description":"ジオメトリのバウンディングボックス（lod1Solid）","properties":{"center":{"description":"バウンディングボックスの中心座標","properties":{"alt":{"description":"中心高度（m・標高）","format":"double","type":"number"},"lat":{"description":"中心緯度","format":"double","type":"number"},"lng":{"description":"中心経度","format":"double","type":"number"}},"type":"object"},"max":{"properties":{"alt":{"description":"最大高度（m・標高）","format":"double","type":"number"},"lat":{"description":"最大緯度","format":"double","type":"number"},"lng":{"description":"最大経度","format":"double","type":"number"}},"type":"object"},"min":{"properties":{"alt":{"description":"最小高度（m・標高）","format":"double","type":"number"},"lat":{"description":"最小緯度","format":"double","type":"number"},"lng":{"description":"最小経度","format":"double","type":"number"}},"type":"object"}},"type":"object"},"_type":{"description":"地物の型","type":"string"},"gml:id":{"description":"地物のID","type":"string"}},"type":"object"},"type":"array"}}},"description":"成功時のレスポンス"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"無効なリクエスト"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"サーバーエラー"}},"summary":"CityGMLの属性情報を取得","tags":["CityGML API"]}},"/citygml/features":{"get":{"parameters":[{"description":"カンマ区切りの空間ID","in":"query","name":"sid","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"featureIds":{"items":{"type":"string"},"type":"array"}},"type":"object"}}},"description":"成功時のレスポンス"}},"summary":"空間ID内の地物IDリストを取得","tags":["CityGML API"]}},"/citygml/pack":{"post":{"requestBody":{"content":{"application/json":{"schema":{"properties":{"urls":{"items":{"description":"PLATEAU CMSから配信されるファイルのURL","type":"string"},"type":"array"}},"type":"object"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"id":{"type":"string"}},"type":"object"}}},"description":"リクエストが受理され、ステータス確認のためのID（パックID）が返却"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"無効なリクエストやURLエラー"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"サーバーエラー"}},"summary":"CityGMLファイルを含んだzipファイルの非同期作成をリクエスト","tags":["CityGML Pack API"]}},"/citygml/pack/{id}.zip":{"get":{"parameters":[{"description":"パックID","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"302":{"description":"リダイレクトしてファイルのダウンロードが開始"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"ファイルの状態が不正または処理未完了"},"404":{"content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}},"type":"object"}}},"description":"ファイルが存在しない"}},"summary":"指定したIDのCityGMLパックファイルをダウンロード","tags":["CityGML Pack API"]}},"/citygml/pack/{id}/status":{"get":{"parameters":[{"description":"パックID","in":"path","name":"id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"progress":{"maximum":1,"minimum":0,"type":"number"},"startedAt":{"format":"date-time","type":"string"},"status":{"enum":["accepted","processing","succeeded","failed"],"type":"string"}},"type":"object"}}},"description":"パック処理の状態を返却"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"ファイルが存在しない"}},"summary":"指定したIDのCityGMLパックプロセスの状態を確認","tags":["CityGML Pack API"]}},"/citygml/spatialid_attributes":{"get":{"parameters":[{"description":"カンマ区切りの空間ID","in":"query","name":"sid","required":true,"schema":{"type":"string"}},{"description":"属性のコードリストを取得しない場合はtrueを指定。デフォルトはfalse。","in":"query","name":"skip_code_list_fetch","required":false,"schema":{"type":"boolean"}},{"description":"カンマ区切りの地物型","in":"query","name":"type","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"additionalProperties":true,"description":"地物の属性情報","properties":{"_bbox":{"description":"ジオメトリのバウンディングボックス（lod1Solid）","properties":{"center":{"description":"バウンディングボックスの中心座標","properties":{"alt":{"description":"中心高度（メートル・標高）","format":"double","type":"number"},"lat":{"description":"中心緯度","format":"double","type":"number"},"lng":{"description":"中心経度","format":"double","type":"number"}},"type":"object"},"max":{"properties":{"alt":{"description":"最大高度（メートル・標高）","format":"double","type":"number"},"lat":{"description":"最大緯度","format":"double","type":"number"},"lng":{"description":"最大経度","format":"double","type":"number"}},"type":"object"},"min":{"properties":{"alt":{"description":"最小高度（メートル・標高）","format":"double","type":"number"},"lat":{"description":"最小緯度","format":"double","type":"number"},"lng":{"description":"最小経度","format":"double","type":"number"}},"type":"object"}},"type":"object"},"_type":{"description":"地物の型","type":"string"},"gml:id":{"description":"地物のID","type":"string"}},"type":"object"},"type":"array"}}},"description":"属性情報のJSON形式での返却"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"無効なリクエスト"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"リソースが見つからない"},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"サーバーエラー"}},"summary":"空間IDと地物型による属性情報取得","tags":["CityGML API"]}},"/datacatalog/citygml/{conditions}":{"get":{"description":"指定した範囲に含まれるCityGMLファイルのURLリストを取得します。","parameters":[{"description":"地理的なエリアや都市の情報をフィルタリングするための条件。詳細は[ドキュメント](https://github.com/Project-PLATEAU/plateau-streaming-tutorial/blob/main/citygml/plateau-citygml.md)参照。\n\n使用例: `m:533945`, `s:spatialID`, `r:135.5,35.0`, `g:locationName`\n\n`:conditions`パラメータは以下の条件タイプに対応している。\n\n1. **メッシュコード (`m`)**\n    - **概要**: カンマ区切りで複数のメッシュコードに基づいてエリアを指定。2次メッシュ（6桁）・3次メッシュ（8桁）・1/2メッシュ（9桁）・1/4メッシュ（10桁）に対応する。メッシュコードはハイフンで区切らず数値だけで表すこと。\n    - **形式**: `m:\u003cメッシュコード\u003e`\n    - **例**: `m:533944,533945`\n\n        https://api.plateauview.mlit.go.jp/datacatalog/citygml/m:533935\n\n2. **メッシュコード厳密検索 (`mm`)**\n    - **概要**: 1とほぼ同じだが、1と比べ、メッシュコードの桁数が完全に一致するCityGMLのみを取得する。2次メッシュの場合は2次メッシュのデータセットのみが、3次メッシュの場合は3次メッシュのCityGMLのみがヒットする。\n    - **形式**: `mm:\u003cメッシュコード\u003e`\n    - **例**: `mm:533944,533945`\n\n        https://api.plateauview.mlit.go.jp/datacatalog/citygml/mm:533935\n\n3. **空間ID (`s`)**\n    - **概要**: カンマ区切りで複数の空間IDを使用してエリアを指定。\n    - **形式**: `s:\u003c空間ID\u003e,\u003c空間ID\u003e,...`\n        - 空間IDは、`z/x/y`、 `z/f/x/y`、 `/z/x/y` 、 `/z/f/x/y` 、およびタイルハッシュの表記に対応。\n    - **例**\n        - https://api.plateauview.mlit.go.jp/datacatalog/citygml/s:18/1/232853/103220\n\n        （ `z/f/x/y` ）\n\n4. **座標範囲 (`r`)**\n    - **概要**: 座標範囲を指定してエリアを指定。\n    - **形式**:\n        - 2要素（`lng`, `lat`）で中心点を指定する場合: `r:lng,lat`\n        - 4要素（`lng1`, `lat1`, `lng2`, `lat2`）で範囲を指定する場合: `r:lng1,lat1,lng2,lat2`\n\n            注意：`lng1` \u003c `lng2`, `lat1` \u003c `lat2` となるように指定する必要がある。\n\n    - **例**:\n        - 中心点の指定: `r:139.7375,35.65833333333333`\n\n            https://api.plateauview.mlit.go.jp/datacatalog/citygml/r:139.7385,35.65933333333333\n\n        - 範囲の指定: `r:139.7375,35.65833333333333,139.74,35.66`\n\n            https://api.plateauview.mlit.go.jp/datacatalog/citygml/r:139.7375,35.65833333333333,139.74,35.66\n\n5. **ジオコーディング (`g`)**\n    - **概要**: ジオコーディングAPIを用いてエリアを指定する。\n    - **形式**: `g:\u003cロケーション名\u003e`\n    - **例**: `g:千代田区`\n\n        [https://api.plateauview.mlit.go.jp/datacatalog/citygml/g:千代田区](https://api.plateauview.mlit.go.jp/datacatalog/citygml/g:%E5%8D%83%E4%BB%A3%E7%94%B0%E5%8C%BA)\n\n6. **自治体コード**\n    - **概要**: カンマ区切りで複数の自治体コードを指定する。\n    - **形式**: `cityId1,cityId2,...`\n    - **例**: `13999`\n\n        https://api.plateauview.mlit.go.jp/datacatalog/citygml/13999\n","in":"path","name":"conditions","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"cityCode":{"description":"The unique code representing the city.","type":"string"},"cityName":{"description":"The name of the city.","type":"string"},"featureTypes":{"additionalProperties":{"properties":{"name":{"description":"The name of the feature type.","type":"string"}},"type":"object"},"description":"A map of feature types available in the CityGML data.","type":"object"},"files":{"additionalProperties":{"items":{"properties":{"code":{"description":"The mesh code representing the geographic area.","type":"string"},"lod0":{"description":"Indicates if LOD0 is available for this file.","type":"boolean"},"lod1":{"description":"Indicates if LOD1 is available for this file.","type":"boolean"},"lod2":{"description":"Indicates if LOD2 is available for this file.","type":"boolean"},"lod3":{"description":"Indicates if LOD3 is available for this file.","type":"boolean"},"lod4":{"description":"Indicates if LOD4 is available for this file.","type":"boolean"},"maxLod":{"description":"The maximum Level of Detail (LOD) available for the CityGML file.","type":"integer"},"url":{"description":"The URL to access this specific CityGML file.","format":"uri","type":"string"}},"required":["code","maxLod","url"],"type":"object"},"type":"array"},"description":"A map of CityGML file lists grouped by type.","type":"object"},"metadataZipUrls":{"items":{"description":"The URL for accessing the metadata zip file.","format":"uri","type":"string"},"type":"array"},"registrationYear":{"description":"The year of registration for the CityGML data.","type":"integer"},"spec":{"description":"The specification of the CityGML data.","type":"string"},"url":{"description":"The URL for accessing the CityGML data.","format":"uri","type":"string"},"year":{"description":"The year associated with the CityGML data.","type":"integer"}},"required":["cityCode","cityName","year","registrationYear","spec","metadataZipUrls","url","files","featureTypes"],"type":"object"}}},"description":"成功時のレスポンス"},"404":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}},"description":"リソースが見つからない"}},"summary":"CityGMLファイルのURLリストを取得","tags":["Data Catalog API"]}},"/datacatalog/graphql":{"get":{"responses":{"200":{"content":{"text/html":{"schema":{"format":"html","type":"string"}}},"description":"GraphQL Playground"}},"summary":"データカタログ GraphQL Playground","tags":["Data Catalog API"]},"post":{"description":"GraphQLスキーマはPlaygroundで確認できます。","requestBody":{"content":{"application/json":{"schema":{"properties":{"query":{"description":"GraphQL query or mutation","type":"string"},"variables":{"additionalProperties":true,"description":"Optional variables for the query","type":"object"}},"type":"object"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"data":{"description":"The response data","type":"object"},"errors":{"description":"The list of errors","items":{"properties":{"locations":{"items":{"properties":{"column":{"description":"The column number","type":"integer"},"line":{"description":"The line number","type":"integer"}},"type":"object"},"type":"array"},"message":{"description":"The error message","type":"string"}},"type":"object"},"type":"array"}},"type":"object"}}},"description":"GraphQL response"}},"summary":"データカタログ GraphQL API","tags":["Data Catalog API"]}},"/datacatalog/plateau-datasets":{"get":{"description":"3D Tiles/MVT のデータセット一覧がJSON形式で返却されます。","responses":{"200":{"content":{"application/json":{"schema":{"properties":{"datasets":{"items":{"description":"3D Tiles/MVT のデータセットを表すオブジェクト。","properties":{"city":{"description":"市区町村名","type":"string"},"city_code":{"description":"5桁の市の市区町村コード","type":"string"},"format":{"description":"データ形式","enum":["3D Tiles","MVT"],"type":"string"},"id":{"description":"データセットのID","type":"string"},"layers":{"description":"MVTのみ利用可能なレイヤー名リスト。3D Tilesの場合はnull。","items":{"type":"string"},"nullable":true,"type":"array"},"lod":{"description":"データのLOD","example":"1","type":"string"},"name":{"description":"データの名称","type":"string"},"pref":{"description":"都道府県名","type":"string"},"pref_code":{"description":"2桁の都道府県コード","type":"string"},"registration_year":{"description":"データがPLATEAU VIEWに登録された年度。\n例: 2023 は2023年度に登録されたデータ。\n","example":2023,"type":"integer"},"spec":{"description":"原典となるCityGMLデータが準拠するPLATEAU 3D都市モデル標準製品仕様書のバージョン（文字列）。\n","example":"3.3","type":"string"},"texture":{"description":"3D Tilesでテクスチャがある場合は `true`。テクスチャがない場合やMVTの場合は `false`。","type":"boolean"},"type":{"description":"配信している3D都市モデルの地物型の種別。\n例: \"建築物モデル\"\n","example":"建築物モデル","type":"string"},"type_en":{"description":"種別の英語名。\n例: \"bldg\" は建築物モデルを意味する。\n","example":"bldg","type":"string"},"url":{"description":"3D Tiles の場合は tileset.json の URL。\nMVT の場合は `{z}/{x}/{y}.mvt` のようなタイル URL。\n","format":"uri","type":"string"},"ward":{"description":"区名。政令指定都市の場合のみ、区の名前が含まれる。\n","nullable":true,"type":"string"},"ward_code":{"description":"5桁の区の市区町村コード。政令指定都市の場合のみ、区ごとの市区町村コードが含まれる。\n","nullable":true,"type":"string"},"year":{"description":"データが整備された年度。\n例: 2023 は2023年度に整備されたデータ。\n","example":2023,"type":"integer"}},"required":["id","name","pref","pref_code","city","city_code","type","type_en","url","year","registration_year","spec","format","lod","texture"],"type":"object"},"type":"array"}},"required":["datasets"],"type":"object"}}},"description":"成功時のレスポンス"}},"summary":"データカタログ シンプルAPI","tags":["Data Catalog API"]}}},"servers":[{"url":"https://api.plateauview.mlit.go.jp"}]}